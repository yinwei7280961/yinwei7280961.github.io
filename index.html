<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="yinwei的个人博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="yinwei的个人博客">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="yinwei">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>yinwei的个人博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">yinwei的个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-right"></div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/01/git%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/c26d8749520ecf2b.png">
      <meta itemprop="name" content="yinwei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yinwei的个人博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/01/git%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">git命令</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-01 12:15:13 / Modified: 12:18:13" itemprop="dateCreated datePublished" datetime="2020-03-01T12:15:13+08:00">2020-03-01</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a href="http://24suixinsuoyu.com" target="_blank" rel="noopener">原链接</a></p>
<h1 id="Git命令大全"><a href="#Git命令大全" class="headerlink" title="Git命令大全"></a>Git命令大全</h1><h1 id="Add-amp-Commit"><a href="#Add-amp-Commit" class="headerlink" title="Add &amp; Commit"></a>Add &amp; Commit</h1><h2 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h2><p>初始化一个 Git 仓库（repository），即把当前所在目录变成 Git 可以管理的仓库。</p>
<h2 id="git-add-文件"><a href="#git-add-文件" class="headerlink" title="git add 文件"></a>git add 文件</h2><p>把文件添加到 暂存区（stage），可被 track 追踪纪录下来。可多次使用来添加多个文件。</p>
<h2 id="git-add"><a href="#git-add" class="headerlink" title="git add *"></a>git add *</h2><p>添加所有修改到暂存区，效果同 git add all，待验证。</p>
<h2 id="git-add-A"><a href="#git-add-A" class="headerlink" title="git add -A"></a>git add -A</h2><p>暂存所有的文件，包括新增加的、修改的和删除的文件。</p>
<h2 id="git-add-1"><a href="#git-add-1" class="headerlink" title="git add ."></a>git add .</h2><p>暂存新增加的和修改的文件，不包括已删除的文件。即当前目录下所有文件。</p>
<h2 id="git-add-u"><a href="#git-add-u" class="headerlink" title="git add -u"></a>git add -u</h2><p>暂存修改的和删除的文件，不包括新增加的文件。</p>
<h2 id="git-add-i"><a href="#git-add-i" class="headerlink" title="git add -i"></a>git add -i</h2><p>交互式添加文件到暂存区。</p>
<h2 id="git-add-p"><a href="#git-add-p" class="headerlink" title="git add -p"></a>git add -p</h2><p>暂存文件的一部分。</p>
<h2 id="git-commit-m-“本次提交说明”"><a href="#git-commit-m-“本次提交说明”" class="headerlink" title="git commit -m “本次提交说明”"></a>git commit -m “本次提交说明”</h2><p>一次性把暂存区所有文件修改提交到仓库的当前分支。注意：提交信息可为中文也可为英文，若为英文则通常用一般现在时。如果不加参数 -m 则会跳转到编辑器强制填写提交说明信息。</p>
<h2 id="git-commit-am-“本次提交说明”"><a href="#git-commit-am-“本次提交说明”" class="headerlink" title="git commit -am “本次提交说明”"></a>git commit -am “本次提交说明”</h2><p>使用该命令，Git 就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 git add 步骤，参数 -am 也可写成-a -m。“在 oh-my-zsh 下，直接用 gcam “message” 就搞定了” —魔都三帅语。</p>
<h2 id="git-commit-–amend"><a href="#git-commit-–amend" class="headerlink" title="git commit –amend"></a>git commit –amend</h2><p>重新提交，最终只会有一个提交，第二次提交将 代替 第一次提交的结果。尤其适用于提交完了才发现漏掉了几个文件没有添加，或者提交信息写错了的情况。</p>
<h2 id="git-commit-–amend-–reset-author"><a href="#git-commit-–amend-–reset-author" class="headerlink" title="git commit –amend –reset-author"></a>git commit –amend –reset-author</h2><p>在上一次 commit 之后想重新更新一下时间。amend 实际上修改了上一个 commit。所以如果已经 push 了上一个 commit，请尽量不要 amend。如果一定要 amend 已经 push 了的 commit，请确保这个 commit 所在的 branch 只有你一个人使用（否则会给其他人带来灾难），然后在 amend 之后使用 git push –force。只要多加小心，该命令貌似没什么卵用。</p>
<h2 id="git-commit-p"><a href="#git-commit-p" class="headerlink" title="git commit -p"></a>git commit -p</h2><p>commit 文件的一部分，适合工作量比较大的情况。之后，Git 会对每块修改弹出一个提示，询问你是否 stage，按 y/n 来选择是否 commit 这块修改，? 可以查看其他操作的说明。</p>
<h2 id="Diff-amp-Show"><a href="#Diff-amp-Show" class="headerlink" title="Diff &amp; Show"></a>Diff &amp; Show</h2><h2 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h2><p>显示当前仓库的最新状态。提交之后，工作区就是“干净的”，即没有新的修改；有未提交文件时，最上面显示的是在 staging area，即将被 commit 的文件；中间显示没有 stage 的修改了的文件，最下面是新的还没有被 Git track 的文件。“在 oh-my-zsh 下，输入 gst 就出来了，谁用谁知道，装逼利器，效率杠杠的”—魔都三帅语。</p>
<h2 id="git-status-s-或-git-status-–short"><a href="#git-status-s-或-git-status-–short" class="headerlink" title="git status -s 或 git status –short"></a>git status -s 或 git status –short</h2><p>状态简览。输入此命令后，有如下几种情况（总共5种情况）：新添加的未跟踪文件前面有 ?? 标记，新添加到暂你可能注意到了 M 有两个可以出现的位置，出现在右边的 M 表示该文件被修改了但是还没放入暂存区，出现在靠左边的 M 表示该文件被修改了并放入了暂存区。</p>
<h2 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h2><p>查看 工作区中的修改。</p>
<h2 id="git-diff-–staged-或-git-diff-–cached"><a href="#git-diff-–staged-或-git-diff-–cached" class="headerlink" title="git diff –staged 或 git diff –cached"></a>git diff –staged 或 git diff –cached</h2><p>查看 暂存区中的修改。</p>
<h2 id="git-diff-1"><a href="#git-diff-1" class="headerlink" title="git diff  "></a>git diff <commit id1> <commit id2></h2><p>比较两次 commit 之间的差异。</p>
<h2 id="git-diff-2"><a href="#git-diff-2" class="headerlink" title="git diff  "></a>git diff <branch1> <branch2></h2><p>在两个 branch 之间比较。</p>
<p>git diff 文件</p>
<p>查看指定文件具体修改了哪些内容。</p>
<p>git diff HEAD – 文件</p>
<p>查看版本库最新版本和工作区之间的区别，貌似没什么卵用。</p>
<p>git difftool –tool-help</p>
<p>查看系统支持哪些 Git Diff 插件，貌似没什么卵用。</p>
<p>git show</p>
<p>查看最后一个 commit 的修改。</p>
<p>git show HEAD~3</p>
<p>查看倒数第四个 commit 的修改，HEAD~3 就是向前数三个的 commit，即倒数第四个 commit。</p>
<p>git show deadbeef</p>
<p>查看 hash 为 deadbeef 的 commit 的修改。</p>
<p>git blame 文件</p>
<p>查看谁什么时间改了哪些文件。</p>
<p>log &amp; reset</p>
<p>git log</p>
<p>显示从最近到最远的提交日志，包括每个提交的 SHA-1 校验和、作者的名字和电子邮件地址、提交时间以及提交说明等基本信息。</p>
<p>git log -p -2</p>
<p>除显示基本信息之外，还显示每次提交的内容差异，-2 意思是仅显示最近两次提交。特别适用于进行代码审查，或者快速浏览某个搭档提交的 commit 所带来的变化。</p>
<p>git log –start</p>
<p>显示每次提交的简略的统计信息，貌似不太好用。</p>
<p>git log –graph</p>
<p>查看分支合并图。</p>
<p>git log –pretty=oneline</p>
<p>简化日志信息，将每个提交放在一行显示，查看的提交数很大时非常有用，也可带有 –graph 参数，效果同 git config format.pretty oneline。</p>
<p>git log –graph –pretty=oneline –abbrev-commit</p>
<p>查看分支的合并情况，包括分支合并图、一行显示、提交校验码缩略显示。</p>
<p>git log –oneline –decorate</p>
<p>查看各个分支当前所指的提交对象（commit object）。Git 仓库中有五个对象：三个 blob 对象（保存着文件快照）、一个树对象（记录着目录结构和 blob 对象索引）以及一个提交对象（包含着指向前述树对象的指针和所有提交信息）。</p>
<p>git log –oneline –decorate –graph –all</p>
<p>查看分叉历史，包括：提交历史、各个分支的指向以及项目的分支分叉情况。</p>
<p>git reset –hard HEAD^</p>
<p>回退到上一个版本。同理，回退到上上个版本为：HEAD^ ^， 回退到上100个版本为：HEAD-100，貌似波浪号 ~ 也可以，变成倒数第101个。</p>
<p>git reflog</p>
<p>纪录每一次命令，可用于查找某一提交版本的 commit id。</p>
<p>git reset –hard <commit id></p>
<p>回退到某一提交过的版本，如果已经 push，则回退的意义不大了。恢复一个彻底删掉的 commit，见链接：</p>
<p><a href="https://github.com/xhacker/GitProTips/blob/master/zh_CN.md#别人-push-了修改我无法-push-了怎么办" target="_blank" rel="noopener">https://github.com/xhacker/GitProTips/blob/master/zh_CN.md#别人-push-了修改我无法-push-了怎么办</a></p>
<p>working area &amp; repo area</p>
<p>工作区（Working Directory）</p>
<p>项目所在的文件目录。</p>
<p>版本库（Repository）</p>
<p>工作区有一个隐藏目录文件 .git（可通过命令 ls -ah 查看隐藏文件），这就是 Git 的版本库。版本库里主要有称为 stage 的暂存区、Git 自动创建的 master 分支，以及指向 master 的一个指针 HEAD，表示版本库的最新版本。</p>
<p>reset &amp; revert</p>
<p>git checkout – 文件</p>
<p>丢弃工作区的修改，包括 修改后还没有放到暂存区 和 添加到暂存区后又作了修改 两种情况。总之，让该文件回到最近一次 git commit 或 git add 之后的状态。注意：没有 – ，就变成了切换分支的命令了。郭神的书 P195 没有 – 符号，可能是笔误。</p>
<p>git reset HEAD 文件</p>
<p>把 暂存区 的修改撤销（unstage），回退到工作区。注意：在 Git 中任何已提交的东西几乎总是可以恢复的。甚至那些被删除的分支中的提交或使用 –amend 选项覆盖的提交也可以恢复。然而，任何未提交的东西丢失后很可能再也找不到了。</p>
<p>git reset –hard</p>
<p>重置所有文件到未修改的状态。</p>
<p>git reset <commit SHA></p>
<p>重置到某个 commit。</p>
<p>git reset HEAD~1</p>
<p>将当前 branch 重置为倒数第二个 commit（即丢弃最后一个 commit）。git reset 有三个参数可以选择，–soft、–mixed 和 –hard。</p>
<p>git reset –soft</p>
<p>修改最后一个 commit。貌似没什么卵用。</p>
<p>git revert <commit id></p>
<p>还原某个 commit。还原（revert）的实质是产生一个新的 commit，内容和要还原的 commit 完全相反。比如，A commit 在 main.c 中增加了三行，revert A 产生的 commit 就会删除这三行。如果我们非常确定之前的某个 commit 产生了 bug，最好的办法就是 revert 它。git revert 后 git 会提示写一些 commit message，此处最好简单描述为什么要还原；而重置（reset）会修改历史，常用于还没有 push 的本地 commits。</p>
<p>git revert HEAD</p>
<p>还原到上次 commit。</p>
<p>remove</p>
<p>git rm 文件</p>
<p>把文件从版本库中删除，不会再追踪到。</p>
<p>git rm -f 文件</p>
<p>强制删除版本库中有修改的文件。</p>
<p>git rm –cached 文件</p>
<p>把文件从版本库中删除，但让文件 保留在工作区且不被 Git 继续追踪（track），通常适用于在 rm 之后把文件添加到 .gitignore 中的情况。</p>
<p>git rm log/*.log</p>
<p>删除 log/ 目录下扩展名为 .log 的所有文件。</p>
<p>git rm *~</p>
<p>删除以 ~ 结尾的所有文件。</p>
<p>Remote repo</p>
<p>remote &amp; push</p>
<p>git remote</p>
<p>查看已经配置的远程仓库服务器，效果同 git remote show。</p>
<p>git remote -v</p>
<p>显示需要读写远程仓库使用的 Git 保存的简写与其对应的 URL。</p>
<p>git ls-remote <remote-name></p>
<p>显示获得远程引用的完整列表。</p>
<p>git remote show <remote-name></p>
<p>参数 remote-name 通常都是缩写名 origin，可以得到远程分支更为详细的信息以及 pull 和 push 相关提示信息。</p>
<p>git remote add <shortname> <url></p>
<p>添加并关联一个远程库。其中，shortname 一般是 origin，也可以是其他字符串，用来代替整个 url。</p>
<p>git push</p>
<p>推送本地修改到 origin。</p>
<p>git push -u origin master</p>
<p>关联后，使用该命令第一次推送 master 分支的所有内容，后续再推送的时候就可以省略后面三个参数了，其中参数 u 代表上游（upstream）的意思。</p>
<p>git push origin 远程分支（通常是 master）</p>
<p>推送最新修改。注意：多人协作时，除了 merge 可能会发生冲突之外，推送时也有可能发生冲突。在他人推送之后是不能立即推送自己的修改的，想想也是，因为可能会覆盖他人的工作，所以必须先拉取（pull）别人的修改合并（merge）之后才能推送。如果不是第一次推送，后面的参数可省略。</p>
<p>git push <remote-name> <commit SHA>:<remote-branch_name></p>
<p>push 一部分 commit。例如：git push origin 9790eff:master 即为 push 9790eff 之前的所有 commit 到 master。</p>
<p>git remote rename old_name new_name</p>
<p>重命名一个远程仓库的简写名。</p>
<p>git remote rm <remote-name></p>
<p>移除一个远程仓库。</p>
<p>git remote add origin <a href="http://github.com/username/" target="_blank" rel="noopener">http://github.com/username/</a><repo name>.git</p>
<p>Create a remote repo named origin pointing at your Github repo (after you’ve already created the repo on Github) (used if you git init since the repo you created locally isn’t linked to a remote repo yet).</p>
<p>git remote add origin <a href="mailto:git@github.com">git@github.com</a>:username/<repo name>.git</p>
<p>Create a remote repo named origin pointing at your Github repo (using SSH url instead of HTTP url).</p>
<p>clone</p>
<p>git clone <a href="mailto:git@github.com">git@github.com</a>:username/<repo name>.git</p>
<p>从远程库（origin）克隆一份到本地，仓库名同远程仓库名。</p>
<p>git clone <a href="https://github.com/username/repo" target="_blank" rel="noopener">https://github.com/username/repo</a> name.git</p>
<p>作用同上。但 不建议使用 https 协议，原因有二：一是速度慢；二是每次推送必须输入口令，麻烦。但在某些只开放 http 端口的公司内部就无法使用原生的 ssh 协议而只能用 https，仓库名同远程仓库名。</p>
<p>git clone <repo url> <folder name></p>
<p>克隆一个仓库到指定文件夹。</p>
<p>git clone <repo url> .</p>
<p>克隆一个仓库到当前文件夹（应该是空的）。</p>
<p>Branch</p>
<p>branch &amp; merge</p>
<p>git branch</p>
<p>列出本地当前所有分支，方便查看。当前分支前面会标有一个 * 号。</p>
<p>git branch -r</p>
<p>查看远程分支列表。</p>
<p>git branch -a</p>
<p>显示所有分支，包括本地和远程。</p>
<p>git branch -v</p>
<p>查看每一次分支的最后一次提交。</p>
<p>git branch -vv</p>
<p>查看设置的所有跟踪分支。将所有的本地分支列出来并且包含更多的信息，如每一个分支正在跟踪哪个远程分支与本地分支是否是领先、落后或是都有。</p>
<p>git branch –merged</p>
<p>查看所有已经被 merge 的 branch。</p>
<p>git branch –no-merged</p>
<p>查看所有还没被 merge 的 branch。</p>
<p>git branch –merged | xargs git branch -d</p>
<p>删除所有已经被 merge 的 branch。</p>
<p>git checkout -b 分支</p>
<p>创建 并 切换 到新的分支，相当于下面两条命令：git branch 分支 + git checkout 分支。</p>
<p>git checkout -</p>
<p>切换到上一个 branch。</p>
<p>git cherry-pick <commit id></p>
<p>假如我们在某个 branch 做了一大堆 commit，而当前 branch 想应用其中的一个，可以使用该命令。</p>
<p>git merge 分支</p>
<p>合并指定分支到当前所在的分支。</p>
<p>git merge –no-ff -m “提交说明信息” 分支</p>
<p>参数 –no-ff 表示 禁用 Fast forward 快进模式，用普通模式合并，这样合并后的历史有分支，能看出来曾经做过合并，而 fast forwad 合并就看不出来曾经做过合并。</p>
<p>git branch -d 分支</p>
<p>普通删除分支（相对强制删除而言）。一般情况下，先合并完分支，然后再删除，否则会删除失败，除非使用 -D 参数强制删除。注意：因为创建、合并和删除分支非常快，所以 Git 鼓励使用分支完成某个任务，合并后再删除分支，这个直接在 master 分支上工作效果是一样的，但过程更安全。</p>
<p>git branch -D 分支</p>
<p>强行删除分支，尤其适用分支内容有了新的修改但还没有被合并的情况。</p>
<p>git push origin –delete 远程分支 或 git push origin:远程分支</p>
<p>删除一个远程分支。基本上这个命令做的只是从服务器上移除这个指针。 Git 服务器通常会保留数据一段时间直到垃圾回收运行，所以如果不小心删除掉了，通常是很容易恢复的。</p>
<p>git push origin -delete 分支</p>
<p>在本地和远程同步删除分支。</p>
<p>git rebase 目标分支（通常是 master）</p>
<p>在本地 master 上进行变基操作。注意：merge 与 rebase 都是整合来自不同分支的修改。</p>
<p>merge 会把两个分支的最新快照以及二者最近的共同祖先进行三方合并，合并的结果是生成一个新的快照（并提交）。</p>
<p>rebase 会把提交到某一分支（当前分支）上的所有修改都转移至另一分支（目标分支）上，就好像“重新播放”一样。</p>
<p>变基是将一系列提交按照原有次序依次应用到另一分支上，而合并是把最终结果合在一起。简言之：这两种整合方法的最终结果没有任何区别，但是变基使得提交历史更加整洁。</p>
<p>采用变基操作后，项目的最终维护者就不再需要进行整合工作，只需要快进合并便可。</p>
<p>git rebase –ongo 目标分支 第一分支 第二分支：选中在第二分支里但不在第一分支里的修改，将它们在目标分支（通常是 master）上重演。</p>
<p>变基有风险，需要遵守的准则是：不要对在你的仓库外有副本的分支执行变基。否则，会导致混乱。总的原则是，只对尚未推送或分享给别人的本地修改执行变基操作清理历史，从不对已推送至别处的提交执行变基操作，这样才能享受到两种方式带来的便利。</p>
<p>还可以有这样的命令：git rebase -i master，git rebase -i 22e21f2，git rebase -i HEAD~3。</p>
<p>stash</p>
<p>git stash</p>
<p>把当前分支的工作现场储存起来，等以后恢复现场后继续工作。一般适用于还没有 commit 的分支代码。</p>
<p>git stash list</p>
<p>查看储存的工作现场纪录列表。</p>
<p>git stash apply + git stash drop</p>
<p>用 git stash apply 命令恢复最近 stash 过的工作现场，但是恢复后，stash 内容并不删除，用 git stash drop 命令来删除。apply 和 drop 后面都可以加上某一指定的 stash_id。</p>
<p>git stash pop</p>
<p>相当于上面两条命令，恢复回到工作现场的同时把 stash 内容也删除了。</p>
<p>git stash clear</p>
<p>清空所有暂存区的 stash 纪录。drop 是只删除一条，当然后面可以跟 stash_id 参数来删除指定的某条纪录，不跟参数就是删除最近的。</p>
<p>git stash apply stash@{0}</p>
<p>上面命令中 大括号中的数字不是固定的，因为可以多次 stash，恢复的时候，先用 git stash list 命令查看，然后恢复指定的 stash。</p>
<p>git biselect</p>
<p>发现了一个 bug，用该命令知道是哪个 commit 导致的，貌似不太好用。</p>
<p>pull &amp; push</p>
<p>git push origin 分支</p>
<p>把该分支上的所有本地提交推送到远程库对应的远程分支上。</p>
<p>git checkout 分支 origin/分支</p>
<p>如果远程有某一个分支而本地没有，怎用该命令把远程的这个分支迁到本地。</p>
<p>git checkout -b 分支 origin/分支</p>
<p>把远程分支迁到本地顺便切换到该分支。</p>
<p>git pull</p>
<p>抓取远程库最新提交，拉取并合并。</p>
<p>git fetch</p>
<p>没有 merge 的 pull。</p>
<p>git branch –set-upstream 分支 origin/分支</p>
<p>建立本地分支和远程分支的关联。</p>
<p>git submodule update –recursive</p>
<p>第三方依赖与远程同步，还可以在最后添加 -f 参数。</p>
<p>Tag</p>
<p>init tag</p>
<p>git tag</p>
<p>查看所有标签。注意：标签不是按照时间列出，而是按照字母排序，但这并不重要。</p>
<p>git show <tag-name></p>
<p>查看标签信息。</p>
<p>git tag -l ‘tag-name’</p>
<p>使用特定的模式查找标签。</p>
<p>git checkout <tag-name></p>
<p>切换 tag。</p>
<p>git tag <tag name> <commit id></p>
<p>在需要打标签的分支上创建一个轻量标签（lightweight），默认为 HEAD，也可以指定一个 commit id。</p>
<p>git tag -a <tag-name> -m “标签说明文字” <commit id></p>
<p>创建附注标签（annotated），用 -a 指定标签名，-m 指定说明文字，也可以指定一个 commit id。</p>
<p>git tag -a <tag-name> 提交的校验和或部分校验和</p>
<p>后期打标签，即对过去的提交打标签。校验和（checksum）：长度为 40位的16进制数的 SHA-1 值字符串。然而，只要没有冲突，通常可以用一个比较短的前缀来表示一个 commit。</p>
<p>git tag -s <tag-name> -m “标签说明文字” <commit id></p>
<p>通过 -s 用私钥签名一个标签。签名采用 GPG 签名，因此，必须首先按照 pgp（GnuPG），如果没有找到 gpg，或者没有 gpg 秘钥对，就会报错。如果报错，请参考 GnuPG 帮助文档配置 Key。</p>
<p>manipulate tag</p>
<p>git tag -d <tag-name></p>
<p>删除一个本地标签。因为创建的标签都只存储在本地，不会自动推送到远程。所以，打错的标签可以在本地安全删除。</p>
<p>git push origin <tag-name></p>
<p>推送本地某个标签到远程，默认情况下，git push 命令并不会推送标签到远程，必须显示推送。</p>
<p>git push origin –tags</p>
<p>参数 –tags 表示一次性推送全部未推送到远程的本地标签，当其他人从仓库中克隆或拉取，他们也能得到那些标签。</p>
<p>git push origin :refs/tags/<tag-name></p>
<p>删除一个远程标签，先从本地删除，再用该命令从远程删除。</p>
<p>git checkout -b <branch-name> <tag-name></p>
<p>在特定的标签上创建一个新分支，貌似没什么卵用。</p>
<p>Custom git</p>
<p>ignore</p>
<p>git add -f 文件</p>
<p>使用 -f 参数，强制添加被 .gitignore 忽略的文件到 Git。</p>
<p>git check-ignore -v 文件</p>
<p>可能是 .gitignore 写得有问题，使用该命令找出到底哪个命令写错了。</p>
<p><a href="https://github.com/github/gitignore" target="_blank" rel="noopener">https://github.com/github/gitignore</a></p>
<p>GitHub 上的一个十分详细的针对数十种项目及语言的 .gitignore 文件列表。</p>
<p>注意：</p>
<p>忽略某些文件时，需要编写 .gitignore 文件；</p>
<p>.gitignore 文件本身要放到版本库里，并且可以对 .gitignore 做版本管理。</p>
<p>alias</p>
<p>git config –global alias.st status</p>
<p>使用 git st 代替 git status 命令。</p>
<p>git config –global alias.co checkout</p>
<p>使用 git co 代替 git checkout 命令。</p>
<p>git config –global alias.cm commit</p>
<p>使用 git cm 代替 git commit 命令。</p>
<p>git config –global alias.br branch</p>
<p>使用 git br 代替 git branch 命令。</p>
<p>git config –global alias.unstage ‘reset HEAD –’</p>
<p>使用 git unstage 文件 命令代替 git reset HEAD – 文件 命令。</p>
<p>git config –global alias.last ‘log -1’</p>
<p>配置一个 git last 命令，让其显示最近一次的提交信息。</p>
<p>git config –global alias.lg “log –color –graph –pretty=format:’%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset’ –abbrev-commit”</p>
<p>丧心病狂地配置 git lg 命令，让显示 log 更加优雅，逼格更高。</p>
<p>git config –global alias.visual ‘!gitk’</p>
<p>Git 只是简单地将别名替换为对应的命令。如果想要执行外部命令而不是一个 Git 子命令，可以在命令前面加入 !符号。 如果自己要写一些与 Git 仓库协作的工具的话，那会很有用。貌似没什么卵用。</p>
<p>Help</p>
<p>git help <key></p>
<p>git <key> –help</p>
<p>man git-<key> </p>
<p>git –help</p>
<p>Others</p>
<p>git config -l 或 git config –list</p>
<p>列举所有 Git 能找到的配置，如果有重复的变量名，Git 会使用它找到的每一个变量的最后一个配置。</p>
<p>git config <key></p>
<p>检查 Git 的某一项配置。</p>
<p>git config –glabal core.editor &lt;vim/emacs/…&gt;</p>
<p>配置默认文本编辑器。</p>
<p>git config –global color.ui true</p>
<p>让 Git 显示颜色，使命令输出看起来更醒目。</p>
<p>git config core.ignorecase false</p>
<p>Git 是大小写不敏感的，如果要大小写敏感需要执行此命令。</p>
<p>git config –global core.quotepath false</p>
<p>设置显示中文文件名。</p>
<p>git config –global credential.helper cache</p>
<p>如果正在使用 HTTPS URL 来推送，Git 服务器会询问用户名与密码。 默认情况下它会在终端中提示服务器是否允许你进行推送。如果不想在每一次推送时都输入用户名与密码，可以设置一个 “credential cache”。 最简单的方式就是将其保存在内存中几分钟，使用该命令即可，貌似没什么卵用。</p>
<p>git config –global user.name “your name”</p>
<p>git config –global user.email “your email”</p>
<p>设置 commit 中的姓名和 email，去掉 –global 参数则为针对每个 repo 单独设定姓名和邮箱。</p>
<p>git commit –author “your name <your email>“</p>
<p>以其他身份 commit。</p>
<p>git mv old_filename new_filename</p>
<p>重命名文件。相当于下面三条命令：</p>
<p>mv old_filename new_filename</p>
<p>git rm old_filename</p>
<p>git add new_filename</p>
<p>git log 常用选项：</p>
<p>-p — 按补丁格式显示每个更新之间的差异。</p>
<p>–stat — 显示每次更新的文件修改统计信息。</p>
<p>–shortstat — 只显示 –stat 中最后的行数修改添加移除统计。</p>
<p>–name-only — 仅在提交信息后显示已修改的文件清单。</p>
<p>–name-status – 显示新增、修改、删除的文件清单。</p>
<p>–abbrev-commit — 仅显示 SHA-1 的前几个字符，而非所有的 40 个字符。</p>
<p>–relative-date — 使用较短的相对时间显示（比如，“2 weeks ago”）。</p>
<p>–graph — 显示 ASCII 图形表示的分支合并历史。</p>
<p>–pretty — 使用其他格式显示历史提交信息。可用的选项包括 oneline，short，full，fuller 和 format（后跟指定格式）。</p>
<p>git log –pretty=format：”%h - %an, %ar : %s”</p>
<p>自定义 log 显示样式，也可带有 –graph 参数。常用的格式占位符写法及其代表的意义：</p>
<p>%H — 提交对象（commit）的完整哈希字串</p>
<p>%h — 提交对象的简短哈希字串</p>
<p>%T — 树对象（tree）的完整哈希字串</p>
<p>%t — 树对象的简短哈希字串</p>
<p>%P — 父对象（parent）的完整哈希字串</p>
<p>%p — 父对象的简短哈希字串</p>
<p>%an — 作者（author）的名字</p>
<p>%ae — 作者的电子邮件地址</p>
<p>%ad — 作者修订日期（可以用 –date= 选项定制格式）</p>
<p>%ar — 作者修订日期，按多久以前的方式显示</p>
<p>%cn — 提交者(committer)的名字</p>
<p>%ce — 提交者的电子邮件地址</p>
<p>%cd — 提交日期</p>
<p>%cr — 提交日期，按多久以前的方式显示</p>
<p>%s — 提交说明</p>
<p>git log –since=2.weeks</p>
<p>显示按照时间限制的 log 信息，这个时间格式可以是：“2008-01-15” 或 “2 years 1 day 3 minutes ago” 等。可用的参数还有：–until，–author，–grep(提交说明中的关键字)等。注意：如果要得到同时满足这两个选项搜索条件的提交，就必须用 –all-match 选项。否则，满足任意一个条件的提交都会被匹配出来。</p>
<p>git log -Sfunction_name</p>
<p>显示添加或移除某一个特定函数的引用（字符串）的提交。</p>
<p>限制 git log 输出的选项：</p>
<p>-(n) — 仅显示最近的 n 条提交。</p>
<p>–since, –after — 仅显示指定时间之后的提交。</p>
<p>–until, –before — 仅显示指定时间之前的提交。</p>
<p>–author — 仅显示指定作者相关的提交。</p>
<p>–committer — 仅显示指定提交者相关的提交。</p>
<p>–grep — 仅显示含指定关键字的提交。</p>
<p>-S — 仅显示添加或移除了某个关键字的提交。</p>
<p>For example，git log –pretty=”%h - %s” –author=gitster –since=”2008-10-01” \ –before=”2008-11-01” –no-merges – t/，即为：查看 Git 仓库中，2008 年 10 月期间，作者提交的但未合并的测试文件。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/18/js%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/c26d8749520ecf2b.png">
      <meta itemprop="name" content="yinwei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yinwei的个人博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/18/js%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="post-title-link" itemprop="url">js性能优化</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-18 19:08:25" itemprop="dateCreated datePublished" datetime="2020-02-18T19:08:25+08:00">2020-02-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-02-19 11:11:51" itemprop="dateModified" datetime="2020-02-19T11:11:51+08:00">2020-02-19</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>来自于《js高级程序设计》；</p>
<h2 id="注意作用域"><a href="#注意作用域" class="headerlink" title="注意作用域"></a>注意作用域</h2><h3 id="1-避免全局查找"><a href="#1-避免全局查找" class="headerlink" title="1.避免全局查找"></a>1.避免全局查找</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> doc=<span class="built_in">document</span>;</span><br><span class="line">    <span class="keyword">var</span> img=doc.getElementByTagName(<span class="string">'img'</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>,len=img.length;i&lt;len;i++)&#123;</span><br><span class="line">        img[i].title=<span class="string">`<span class="subst">$&#123;doc.title&#125;</span> image  <span class="subst">$&#123;i&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> msg = doc.getElementBy(<span class="string">'msg);</span></span><br><span class="line"><span class="string">    msg.innerHTML='</span>UPdate complete.<span class="string">';</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-避免with语句"><a href="#2-避免with语句" class="headerlink" title="2.避免with语句"></a>2.避免with语句</h3><p>和函数类似，with语句会创建自己的作用域，因此为增加其中执行的代码的作用域链的长度。<br>由于额外的作用域链查找，在with语句中执行的代码要比外面执行的代码慢</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.time(<span class="string">'with'</span>)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBody</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">with</span>(<span class="built_in">document</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> ul=<span class="string">'&lt;ul&gt;'</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">100000</span>;i++)&#123;</span><br><span class="line">            ul+=<span class="string">`&lt;li&gt;<span class="subst">$&#123;i&#125;</span>&lt;/li&gt;`</span></span><br><span class="line">        &#125;</span><br><span class="line">        ul+=<span class="string">'&lt;/ul&gt;'</span>;</span><br><span class="line">        body.innerHTML=ul;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">updateBody();</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'with'</span>);</span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">'no with'</span>)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBody</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body=<span class="built_in">document</span>.body;</span><br><span class="line">    <span class="keyword">var</span> ul=<span class="string">'&lt;ul&gt;'</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">100000</span>;i++)&#123;</span><br><span class="line">            ul+=<span class="string">`&lt;li&gt;<span class="subst">$&#123;i&#125;</span>&lt;/li&gt;`</span></span><br><span class="line">        &#125;</span><br><span class="line">        ul+=<span class="string">'&lt;/ul&gt;'</span>;</span><br><span class="line">        body.innerHTML=ul;</span><br><span class="line">&#125;</span><br><span class="line">updateBody();</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'no with'</span>);</span><br></pre></td></tr></table></figure>
<h2 id="2、选择正确方法"><a href="#2、选择正确方法" class="headerlink" title="2、选择正确方法"></a>2、选择正确方法</h2><h3 id="1-避免不必要的属性查找"><a href="#1-避免不必要的属性查找" class="headerlink" title="1.避免不必要的属性查找"></a>1.避免不必要的属性查找</h3><table>
    <tr>
        <th>
        标记名称
        </th>
        <th colspan='2'>
        描叙
        </th>
    </tr>
    <tr>
        <td>
        O(1)
        </td>
        <td>
        常数
        </td>
        <td>
        不管有多少值，执行时间都是恒定的。一般表示简单之和存储在变量中的值
        </td>
    </tr>
    <tr>
        <td>
        O(log n)
        </td>
        <td>
        对数
        </td>
        <td>
        总的执行时间和值的数量相关，但是要完成算法不一定要获取每一个值。例如：二分查找
        </td>
    </tr>
    <tr>
        <td>
        O(n)
        </td>
        <td>
        线性
        </td>
        <td>
        总执行时间和值的数量直接相关。例如：遍历某个数组的所有元素
        </td>
    </tr>
    <tr>
        <td>
        O(n^2)
        </td>
        <td>
        平方
        </td>
        <td>
        总执行时间和值的数量有关，每个值至少获取n次。例如：插入排序
        </td>
    </tr>
</table>


<p>一旦多次用到对象属性，应该将其存储在局部变量中。第一次访问值会是O(n),然后后续的访问都会<br>是O(1),就会节省很多。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> query=<span class="built_in">window</span>.location.href.substring(<span class="built_in">window</span>.location.href.indexOf(<span class="string">'?'</span>));</span><br><span class="line"><span class="comment">//改为</span></span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">window</span>.location.href;</span><br><span class="line"><span class="keyword">var</span> query = url.substring(url.indexOf(<span class="string">'?'</span>));</span><br></pre></td></tr></table></figure>
<h3 id="2-优化循环"><a href="#2-优化循环" class="headerlink" title="2.优化循环"></a>2.优化循环</h3><p>  1.减值迭代—-大多数循环使用一个从0开会、添加到某个特定值的迭代器。在很多情况下，从最大值开始，在循环中不断减值的迭代器更加高效<br>  2.简化终止条件—由于每次循环过程都会计算终止条件，所以必须保证它尽可能快。<br>  3.简化循环体—-循环体是执行最多的，所以要确保其被最大限度地优化。<br>  4.使用后测试循环—最常用for循环和while循环都是前测试循环。而如do-while这种后测试循环，可以避免最初终止条件的计算，因此运行更快。<br>  测试了 while是比for略优，旦差距不大。<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.time(<span class="string">'for'</span>)</span><br><span class="line">  <span class="keyword">var</span> arr=[];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">1000000</span>;i++)&#123;</span><br><span class="line">      arr.push(i);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">'for'</span>);</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">'while'</span>);</span><br><span class="line">  <span class="keyword">var</span> arr1=[],i=<span class="number">1000000</span>;</span><br><span class="line">  <span class="keyword">while</span>(--i&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">      arr1.push(i);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">'while'</span>);</span><br><span class="line">  <span class="keyword">for</span>: <span class="number">57.841552734375</span>ms</span><br><span class="line">   <span class="keyword">while</span>: <span class="number">50.230224609375</span>ms</span><br></pre></td></tr></table></figure></p>
<h3 id="3-展开循环"><a href="#3-展开循环" class="headerlink" title="3.展开循环"></a>3.展开循环</h3><p>  由Andrew B.King所著的Speed Up Your Site（New Rides,2003）提出了一个更快的Duff装置技术，将do-while循环分成2个单独的循环。以下是例子<br>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//假设values不为空</span></span><br><span class="line">  <span class="keyword">var</span> interations=<span class="built_in">Math</span>.ceil(values.length/<span class="number">8</span>);</span><br><span class="line">  <span class="keyword">var</span> leftover=values.length%<span class="number">8</span>;</span><br><span class="line">  <span class="keyword">var</span> i=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span>(leftover&gt;<span class="number">0</span>)&#123;</span><br><span class="line">     <span class="keyword">do</span>&#123;</span><br><span class="line">         process(values[i++]);</span><br><span class="line">     &#125;<span class="keyword">while</span>(--leftover&gt;<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">do</span>&#123;</span><br><span class="line">      process(values[i++]);</span><br><span class="line">      process(values[i++]);</span><br><span class="line">      process(values[i++]);</span><br><span class="line">      process(values[i++]);</span><br><span class="line">      process(values[i++]);</span><br><span class="line">      process(values[i++]);</span><br><span class="line">      process(values[i++]);</span><br><span class="line">      process(values[i++]);</span><br><span class="line">  &#125;<span class="keyword">while</span>(--iterations&gt;<span class="number">0</span>);</span><br><span class="line">  <span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string">### 4.避免双重解释 </span></span><br><span class="line"><span class="string">  当javascript代码想解析javascript的时候就会存在双重解释惩罚。当使用eval（）函数或者是function构造函数以及使用setTimeout传一个字符串参数时都会发生这种情况。下面有一些例子</span></span><br><span class="line"><span class="string">  `</span><span class="string">``</span>javascipt</span><br><span class="line">  <span class="comment">//某些代码求值---避免！！</span></span><br><span class="line">  <span class="built_in">eval</span>(<span class="string">'alert("hello world")'</span>);</span><br><span class="line">  <span class="comment">//创建新函数---避免！！</span></span><br><span class="line">  <span class="keyword">var</span> sayHi=<span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'alert("hello world")'</span>);</span><br><span class="line">  <span class="comment">//设置超时---避免！！</span></span><br><span class="line">  setTimeout(<span class="string">'alert("hello world")'</span>,<span class="number">500</span>);</span><br><span class="line">   <span class="comment">//修正之后</span></span><br><span class="line">  alert(<span class="string">"hello world"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> sayHi=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="string">"hello world"</span>)&#125;;</span><br><span class="line"></span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="string">"hello world"</span>)&#125;,<span class="number">500</span>);</span><br></pre></td></tr></table></figure></p>
<h3 id="5-性能的其他注意事项"><a href="#5-性能的其他注意事项" class="headerlink" title="5.性能的其他注意事项"></a>5.性能的其他注意事项</h3><ul>
<li>1 原生方法较快—只要有可能，使用原生方法而不是自己用javascript重写一个。</li>
<li>2 Switch 语句较快—如果有一系列复杂的if-else语句，可以转换成单个swicth语句则可以得到更快的代码</li>
<li>3 位运算较快—当进行数学运算时候，位运算操作要比人布尔运算或者算术运算快。 </li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/18/js%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/c26d8749520ecf2b.png">
      <meta itemprop="name" content="yinwei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yinwei的个人博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/18/js%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7/" class="post-title-link" itemprop="url">js高级技巧</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-02-18 14:35:25 / Modified: 15:22:40" itemprop="dateCreated datePublished" datetime="2020-02-18T14:35:25+08:00">2020-02-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="以下是《js高级程序设计》这本书的知识点"><a href="#以下是《js高级程序设计》这本书的知识点" class="headerlink" title="以下是《js高级程序设计》这本书的知识点"></a>以下是《js高级程序设计》这本书的知识点</h1><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="1-作用域安全的构造函数"><a href="#1-作用域安全的构造函数" class="headerlink" title="1.作用域安全的构造函数"></a>1.作用域安全的构造函数</h3><p>用来解决构造函数作为普通函数调用的忽略了new操作符是构造函数的属性搭载到window上。<br>这个问题是由this对象的绑定造成的<br>错误的列子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age,job</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.name=name;</span><br><span class="line">   <span class="keyword">this</span>.age=age;</span><br><span class="line">   <span class="keyword">this</span>.job=job;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person=Person(<span class="string">'jack'</span>,<span class="number">29</span>,<span class="string">'engineer'</span>);</span><br><span class="line">alert(<span class="built_in">window</span>.name);<span class="comment">//jack</span></span><br><span class="line">alert(<span class="built_in">window</span>.age);<span class="comment">//29</span></span><br><span class="line">alert(<span class="built_in">window</span>.job);<span class="comment">//engineer</span></span><br></pre></td></tr></table></figure>
<p>下面是作用域安全的构造函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age,job</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(<span class="keyword">this</span> <span class="keyword">instanceof</span> Person)&#123;</span><br><span class="line">       <span class="keyword">this</span>.name=name;</span><br><span class="line">       <span class="keyword">this</span>.age=age;</span><br><span class="line">       <span class="keyword">this</span>.job=job;</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> Person(anem,age,job);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person1=Person(<span class="string">'jack'</span>,<span class="number">29</span>,<span class="string">'worker'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.name);<span class="comment">//''</span></span><br><span class="line"><span class="built_in">console</span>.log(person1.name);<span class="comment">//jack</span></span><br><span class="line"><span class="keyword">var</span> person2=Person(<span class="string">'john'</span>,<span class="number">26</span>,<span class="string">'engineer'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person2.name);<span class="comment">//john</span></span><br></pre></td></tr></table></figure>
<h3 id="2-惰性载入函数"><a href="#2-惰性载入函数" class="headerlink" title="2.惰性载入函数"></a>2.惰性载入函数</h3><p>惰性载入表示函数执行的分支仅会发生一次。<br>没有惰性载入的例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createXhr</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> XMLHttpRequest != <span class="string">'undefined'</span>)&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">typeof</span> ActiveXObject != <span class="string">'undefined'</span>)&#123;</span><br><span class="line">       <span class="keyword">var</span> verions=[<span class="string">'MSXML2.XMLHttp.6.0'</span>,<span class="string">'MSXML2.XMLhttp.3.0'</span>,<span class="string">'MSXML2.XMLhttp'</span>];</span><br><span class="line">       <span class="keyword">var</span> i,len;</span><br><span class="line">       <span class="keyword">for</span>(i=<span class="number">0</span>,len=verions.length;i&lt;len;i++&gt;)&#123;</span><br><span class="line">           <span class="keyword">try</span>&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">new</span> ActiveXObject(versions[i]);</span><br><span class="line">           &#125;<span class="keyword">catch</span>(ex)&#123;</span><br><span class="line">             <span class="comment">//跳过</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>惰性载入的例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createXhr=(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> XMLHttpRequest != <span class="string">'undefined'</span>)&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">new</span> XMLHttpRequest();&#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">typeof</span> ActiveXObject != <span class="string">'undefined'</span>)&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">          <span class="keyword">var</span> verions=[<span class="string">'MSXML2.XMLHttp.6.0'</span>,<span class="string">'MSXML2.XMLhttp.3.0'</span>,<span class="string">'MSXML2.XMLhttp'</span>];</span><br><span class="line">          <span class="keyword">var</span> i,len;</span><br><span class="line">          <span class="keyword">for</span>(i=<span class="number">0</span>,len=verions.length;i&lt;len;i++&gt;)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> ActiveXObject(versions[i]);</span><br><span class="line">                &#125;<span class="keyword">catch</span>(ex)&#123;</span><br><span class="line">                    <span class="comment">//跳过</span></span><br><span class="line">                &#125;</span><br><span class="line">           &#125; </span><br><span class="line">       &#125;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h2 id="3-函数柯里化"><a href="#3-函数柯里化" class="headerlink" title="3.函数柯里化"></a>3.函数柯里化</h2><p>柯里化函数通常由以下步骤动态创建：调用另一个函数并为它传入要柯里化的函数和必要参数。<br>下面是创建柯里化函数的通用方式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> args=<span class="built_in">Array</span>.prototype.slice.call(argments,<span class="number">1</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="keyword">var</span> innerArgs=<span class="built_in">Array</span>.prototype.slice.call(argments);</span><br><span class="line">       <span class="keyword">var</span> finalArgs=args.concat(innerArgs);</span><br><span class="line">       <span class="keyword">return</span> fn.apply(<span class="literal">null</span>,finalArgs);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>函数柯里化常常作为函数绑定的一部分包含其中，构造出更为复杂的bind()函数。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">fn,context</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> args=<span class="built_in">Array</span>.prototype.slice.call(argments,<span class="number">2</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="keyword">var</span> innerArgs=<span class="built_in">Array</span>.prototype.slice.call(argments);</span><br><span class="line">       <span class="keyword">var</span> finalArgs=args.concat(innerArgs);</span><br><span class="line">       <span class="keyword">return</span> fn.apply(context,finalArgs);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-函数节流"><a href="#4-函数节流" class="headerlink" title="4.函数节流"></a>4.函数节流</h2><p>函数节流的基本思想是指，某些代码不可以在没有间断的情况下连续重复执行。<br>函数节流: 指定时间间隔内只会执行一次任务；<br>函数防抖: 任务频繁触发的情况下，只有任务触发的间隔超过指定间隔的时候，任务才会执行。<br>以下是该模式的基本形式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> processor=&#123;</span><br><span class="line">    timeoutId:<span class="literal">null</span>,</span><br><span class="line">    <span class="comment">//实际进行处理的方法</span></span><br><span class="line">    performProcessing:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//实际执行的代码</span></span><br><span class="line">    &#125;，</span><br><span class="line">    <span class="comment">//初始处理调用的方法</span></span><br><span class="line">    process:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        clearTimeout(<span class="keyword">this</span>.timeoutId);</span><br><span class="line">        <span class="keyword">this</span>.timeoutId=SetTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.performProcessing();</span><br><span class="line">        &#125;,<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//函数节流的另一中写法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, interval = <span class="number">300</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> canRun = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!canRun) <span class="keyword">return</span>;</span><br><span class="line">        canRun = <span class="literal">false</span>;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">            canRun = <span class="literal">true</span>;</span><br><span class="line">        &#125;, interval);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//函数防抖</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, interval = <span class="number">300</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timeout = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        clearTimeout(timeout);</span><br><span class="line">        timeout = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">        &#125;, interval);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/17/%E5%8E%9F%E7%94%9F%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AApromise/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/c26d8749520ecf2b.png">
      <meta itemprop="name" content="yinwei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yinwei的个人博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/17/%E5%8E%9F%E7%94%9F%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AApromise/" class="post-title-link" itemprop="url">原生实现一个promise</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-17 19:32:56" itemprop="dateCreated datePublished" datetime="2020-02-17T19:32:56+08:00">2020-02-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-02-18 13:23:14" itemprop="dateModified" datetime="2020-02-18T13:23:14+08:00">2020-02-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>什么是promise</p>
<p>Promise 是异步编程的一种解决方案，比传统的解决方案——回调函数和事件——更合理和更强大。它由社区最早提出和实现，ES6 将其写进了语言标准，统一了用法，原生提供了Promise对象。</p>
<p>参考promiseA+规范总结:<br>我们知道promise中共有三种状态<br>pending 过渡态<br>resloved 完成态<br>rejected 失败态</p>
<p>promise状态改变只有两种可能 过渡态=&gt;成功态<br>过渡态 =&gt; 失败态</p>
<p>过程不可逆 无法相互转化<br>下面是代码 过程没写<br>过程图<br><img src="/images/2118773-c4a196b47823799b.webp" alt="RUNOOB 图标"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">handle</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> handle !=<span class="string">'function'</span>)&#123;</span><br><span class="line">       <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'handle need be a function'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//初始化状态</span></span><br><span class="line">    <span class="keyword">this</span>.status = <span class="string">'pending'</span>;</span><br><span class="line">    <span class="comment">//成功状态记录的值</span></span><br><span class="line">    <span class="keyword">this</span>.value = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="comment">//失败状态记录的值</span></span><br><span class="line">    <span class="keyword">this</span>.reason = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="comment">//成功 处理回调数组</span></span><br><span class="line">    <span class="keyword">this</span>.onResolveCallbaks=[];</span><br><span class="line">    <span class="comment">//失败 处理回调数组</span></span><br><span class="line">    <span class="keyword">this</span>.onRejectCallbaks=[];</span><br><span class="line">    <span class="comment">//成功处理函数</span></span><br><span class="line">    <span class="keyword">const</span> resolve = <span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">          <span class="comment">//用setTimeout 模拟异步</span></span><br><span class="line">           setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">             <span class="keyword">if</span>(<span class="keyword">this</span>.status === <span class="string">'pending'</span>)&#123;</span><br><span class="line">                <span class="keyword">this</span>.status = <span class="string">'reslove'</span>;</span><br><span class="line">                <span class="keyword">this</span>.value = value;</span><br><span class="line">                <span class="comment">//循环遍历 调用存储的回调函数</span></span><br><span class="line">                <span class="keyword">this</span>.onResolveCallbacks.forEach(<span class="function">(<span class="params">fn</span>)=&gt;</span>&#123;</span><br><span class="line">                    fn();</span><br><span class="line">                &#125;);</span><br><span class="line">             &#125;</span><br><span class="line">           &#125;,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//失败处理函数</span></span><br><span class="line">    <span class="keyword">const</span> reject = <span class="function">(<span class="params">reason</span>)=&gt;</span>&#123;</span><br><span class="line">          <span class="comment">//用setTimeout 模拟异步</span></span><br><span class="line">           setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">             <span class="keyword">if</span>(<span class="keyword">this</span>.status === <span class="string">'pending'</span>)&#123;</span><br><span class="line">                <span class="keyword">this</span>.status = <span class="string">'reject'</span>;</span><br><span class="line">                <span class="keyword">this</span>.reason = reason;</span><br><span class="line">                <span class="comment">//循环遍历 调用存储的回调函数</span></span><br><span class="line">                <span class="keyword">this</span>.onRejectCallbaks.forEach(<span class="function">(<span class="params">fn</span>)=&gt;</span>&#123;</span><br><span class="line">                    fn();</span><br><span class="line">                &#125;);</span><br><span class="line">             &#125;</span><br><span class="line">           &#125;,<span class="number">0</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        handle(resolve,reject);</span><br><span class="line">    &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">        reject(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.prototype.then = <span class="function"><span class="keyword">function</span>(<span class="params">onResolve,onReject</span>)</span>&#123;</span><br><span class="line">    onResolve=<span class="keyword">typeof</span> onResolve === <span class="string">'function'</span>?onResolve:<span class="function"><span class="params">()</span>=&gt;</span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.value;&#125;</span><br><span class="line">    onReject=<span class="keyword">typeof</span> onReject === <span class="string">'function'</span>?onReject:<span class="function"><span class="params">()</span>=&gt;</span>&#123;<span class="keyword">return</span> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="keyword">this</span>.reason);&#125;;</span><br><span class="line">    <span class="comment">//此处是为了实现 then的链式调用</span></span><br><span class="line">    <span class="keyword">let</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> x;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.state === <span class="string">'resolve'</span>)&#123;</span><br><span class="line">            handleError(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            x = onReslove(<span class="keyword">this</span>.value);</span><br><span class="line">                promiseReslove(promise1,x,resolve,reject);</span><br><span class="line">            &#125;,reject)</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">this</span>.state === <span class="string">'reject'</span>)&#123;</span><br><span class="line">            handleError(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                x = onReject(<span class="keyword">this</span>.reason);</span><br><span class="line">                promiseHandle(promise1,x,resolve,reject);</span><br><span class="line">            &#125;,reject)</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">this</span>.state === <span class="string">'pending'</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.onResloveCallbacks.push(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">                handleError(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                    x = onReslove(<span class="keyword">this</span>.value)</span><br><span class="line">                    promiseHandle(promise1,x,resolve,reject)</span><br><span class="line">                &#125;,reject)</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">this</span>.onRejectCallbacks.push(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                handleError(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                    onReject(<span class="keyword">this</span>.reason)</span><br><span class="line">                    promiseHandle(promise1,x,resolve,reject)</span><br><span class="line">                &#125;,reject)            </span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> promise1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>//容错处理 一旦fn 里面的出错了 就会调用reject;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handleError = <span class="function">(<span class="params">fn,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        fn();</span><br><span class="line">    &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">    reject(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>/**</p>
<ul>
<li></li>
<li>@param {*} promise 下一次then返回的promise实例 </li>
<li>@param {*} x       本次返回值x</li>
<li>@param {*} reslove promise2的成功方法</li>
<li>@param {*} reject  promise2的失败方法</li>
<li>/<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promiseHandle = <span class="function">(<span class="params">promises,x,resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//x为返回值;</span></span><br><span class="line">    <span class="keyword">if</span>(promises === x )&#123;</span><br><span class="line">        <span class="keyword">return</span> reject(<span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"循环引用"</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断是否为Promise的实例</span></span><br><span class="line">    <span class="keyword">if</span>(x <span class="keyword">instanceof</span> <span class="built_in">Promise</span>)&#123;</span><br><span class="line">        x.then((<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">            promiseHandle(promises,value,resolve,reject)</span><br><span class="line">        &#125;),reject)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//处理其它情况</span></span><br><span class="line">    <span class="keyword">if</span>(x!== <span class="literal">null</span>&amp;&amp;(<span class="keyword">typeof</span> x === <span class="string">'object'</span>||<span class="keyword">typeof</span> x === <span class="string">'function'</span>))&#123;</span><br><span class="line">        <span class="keyword">let</span> then = x.then,isCalled = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">typeof</span> then === <span class="string">'function'</span>)&#123;</span><br><span class="line">                then.call(x,y=&gt;&#123;</span><br><span class="line">                    <span class="keyword">if</span>(isCalled) <span class="keyword">return</span>;</span><br><span class="line">                    isCalled = <span class="literal">true</span>;</span><br><span class="line">                    promiseHandle(promises,y,resolve,reject)</span><br><span class="line">                &#125;,r =&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span>(isCalled) <span class="keyword">return</span></span><br><span class="line">                    isCalled = <span class="literal">true</span>;</span><br><span class="line">                    reject(r)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                resolve(x)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">            <span class="keyword">if</span>(isCalled) <span class="keyword">return</span>;</span><br><span class="line">            isCalled = <span class="literal">true</span>;</span><br><span class="line">            reject(e)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        reslove(x)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
原文(<a href="https://www.cnblogs.com/xianyulaodi/p/6256399.html" target="_blank" rel="noopener">https://www.cnblogs.com/xianyulaodi/p/6256399.html</a>)</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/17/es10%E7%89%B9%E6%80%A7%E7%9A%84%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/c26d8749520ecf2b.png">
      <meta itemprop="name" content="yinwei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yinwei的个人博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/17/es10%E7%89%B9%E6%80%A7%E7%9A%84%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/" class="post-title-link" itemprop="url">es10特性的完整指南</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-17 18:32:35" itemprop="dateCreated datePublished" datetime="2020-02-17T18:32:35+08:00">2020-02-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-02-18 13:13:53" itemprop="dateModified" datetime="2020-02-18T13:13:53+08:00">2020-02-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="BigInt-任意精度整数"><a href="#BigInt-任意精度整数" class="headerlink" title="BigInt -任意精度整数"></a>BigInt -任意精度整数</h2><h3 id="BigInt-是第七种-原始类型。"><a href="#BigInt-是第七种-原始类型。" class="headerlink" title="BigInt 是第七种 原始类型。"></a>BigInt 是第七种 原始类型。</h3><p>BigInt 是一个任意精度的整数。这意味着变量现在可以 表示²⁵³ 数字，而不仅仅是9007199254740992。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> limit = <span class="built_in">Number</span>.MAX_SAFE_INTEGER;</span><br><span class="line"></span><br><span class="line">⇨ <span class="number">9007199254740991</span></span><br><span class="line"></span><br><span class="line">limit + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">⇨ <span class="number">9007199254740992</span></span><br><span class="line">limit + <span class="number">2</span>;</span><br><span class="line">⇨ <span class="number">9007199254740992</span> &lt;--- MAX_SAFE_INTEGER + <span class="number">1</span> exceeded</span><br><span class="line"><span class="keyword">const</span> larger = <span class="number">9007199254740991n</span>;</span><br><span class="line">⇨ <span class="number">9007199254740991n</span></span><br><span class="line"><span class="keyword">const</span> integer = BigInt(<span class="number">9007199254740991</span>); <span class="comment">// initialize with number</span></span><br><span class="line">⇨ <span class="number">9007199254740991n</span></span><br><span class="line"><span class="keyword">const</span> same = BigInt(<span class="string">"9007199254740991"</span>); <span class="comment">// initialize with "string"</span></span><br><span class="line">⇨ <span class="number">9007199254740991n</span><span class="string">`</span></span><br></pre></td></tr></table></figure>
<h2 id="string-prototype-matchAll"><a href="#string-prototype-matchAll" class="headerlink" title="string.prototype.matchAll()"></a>string.prototype.matchAll()</h2><p>如果您运行谷歌搜索JavaScript string match all，第一个结果将是这样的：如何编写正则表达式“match all”？</p>
<p>最佳结果将建议 String.match 与正则表达式和 /g 一起使用或者带有 /g 的 RegExp.exec 或者带有 /g 的 RegExp.test。</p>
<p>首先，让我们看看旧规范是如何工作的。</p>
<p>带字符串参数的 String.match 仅返回第一个匹配：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> string = <span class="string">'Hello'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> matches = string.match(<span class="string">'l'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(matches[<span class="number">0</span>]); <span class="comment">// "l`</span></span><br></pre></td></tr></table></figure>

<p>结果是单个 “l”（注意：匹配存储在 matches[0] 中而不是 matches）</p>
<p>在“hello”中搜索 “l” 只返回 “l”。</p>
<p>将 string.match 与 regex 参数一起使用也是如此：</p>
<p>让我们使用正则表达式 /l/ 找到字符 串“hello” 中的 “l” 字符：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`let string = "Hello";</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let matches = string.match(/l/);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">console.log(matches[0]); // "l"`</span></span><br></pre></td></tr></table></figure>

<h2 id="添加-g-混合"><a href="#添加-g-混合" class="headerlink" title="添加 /g 混合"></a>添加 /g 混合</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`let string = "Hello";</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let ret = string.match(/l/g); // (2) [“l”, “l”];`</span></span><br></pre></td></tr></table></figure>

<p>很好，我们使用 &lt; ES10 方式得到了多个匹配，它一直起作用。</p>
<p>那么为什么要使用全新的 matchAll 方法呢? 在我们更详细地回答这个问题之前，让我们先来看看 捕获组。如果不出意外，你可能会学到一些关于正则表达式的新知识。</p>
<p>正则表达式捕获组</p>
<p>在 regex 中捕获组只是从 () 括号中提取一个模式，可以使用 /regex/.exec(string) 和string.match 捕捉组。</p>
<p>常规捕获组是通过将模式包装在 (pattern) 中创建的，但是要在结果对象上创建 groups 属性，它是: (?<name>pattern)。</p>
<p>要创建一个新的组名，只需在括号内附加 ?<name>，结果中，分组 (pattern) 匹配将成为 group.name，并附加到 match 对象，以下是一个实例：</p>
<p>字符串标本匹配：</p>
<p>这里创建了 match.groups.color 和 match.groups.bird ：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`const string = 'black*raven lime*parrot white*seagull';</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">const regex = /(?&lt;color&gt;.*?)\*(?&lt;bird&gt;[a-z0-9]+)/g;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">while (match = regex.exec(string))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let value = match[0];</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let index = match.index;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let input = match.input;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  console.log(`</span>$&#123;value&#125; at $&#123;index&#125; <span class="keyword">with</span> <span class="string">'$&#123;input&#125;'</span><span class="string">`);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  console.log(match.groups.color);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  console.log(match.groups.bird);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;`</span></span><br></pre></td></tr></table></figure>

<p>需要多次调用 regex.exec 方法来遍历整个搜索结果集。 在每次迭代期间调用 .exec 时，将显示下一个结果（它不会立即返回所有匹配项。），因此使用 while 循环。</p>
<p>输出如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="string">`black*raven at 0 with 'black*raven lime*parrot white*seagull'</span></span><br><span class="line"><span class="string">black</span></span><br><span class="line"><span class="string">raven</span></span><br><span class="line"><span class="string">lime*parrot at 11 with 'black*raven lime*parrot white*seagull'</span></span><br><span class="line"><span class="string">lime</span></span><br><span class="line"><span class="string">parrot</span></span><br><span class="line"><span class="string">white*seagull at 23 with 'black*raven lime*parrot white*seagull'</span></span><br><span class="line"><span class="string">white</span></span><br><span class="line"><span class="string">seagull`</span></span><br></pre></td></tr></table></figure>

<p>但奇怪的是:</p>
<p>如果你从这个正则表达式中删除 /g，你将永远在第一个结果上创建一个无限循环。这在过去是一个巨大的痛苦。想象一下，从某个数据库接收正则表达式时，你不确定它的末尾是否有 /g，你得先检查一下。</p>
<h3 id="使用-matchAll-的好理由"><a href="#使用-matchAll-的好理由" class="headerlink" title="使用 .matchAll() 的好理由"></a>使用 .matchAll() 的好理由</h3><blockquote>
<blockquote>
<ol>
<li>在与捕获组一起使用时，它可以 更加优雅,捕获组只是使用 () 提取模式的正则表达式的一部分。</li>
</ol>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<ol start="2">
<li>它 返回一个迭代器而 不是一个数组，迭代器本身是有用的。</li>
</ol>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<ol start="3">
<li>迭代器可以使用扩展运算符 (…) 转换为数组。</li>
</ol>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<ol start="4">
<li>它避免了带有 /g 标志的正则表达式，当从数据库或外部源检索未知正则表达式并与陈旧的RegEx 对象一起使用时，它非常有用。</li>
</ol>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<ol start="5">
<li>使用 RegEx 对象创建的正则表达式不能使用点 (.) 操作符链接。</li>
</ol>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<ol start="6">
<li>高级: RegEx 对象更改跟踪最后匹配位置的内部 .lastindex 属性，这在复杂的情况下会造成严重破坏。</li>
</ol>
</blockquote>
</blockquote>
<p>.matchAll() 是如何工作的</p>
<p>让我们尝试匹配单词 hello 中字母 e 和 l 的所有实例， 因为返回了迭代器，所以可以使用 for…of 循环遍历它：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Match all occurrences of the letters: "e" or "l" </span></span><br><span class="line"></span><br><span class="line"><span class="string">`let iterator = "hello".matchAll(/[el]/);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">for (const match of iterator)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  console.log(match);`</span></span><br></pre></td></tr></table></figure>

<p>这一次你可以跳过 /g， .matchall 方法不需要它，结果如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`[ 'e', index: 1, input: 'hello' ] // Iteration 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[ 'l', index: 2, input: 'hello' ] // Iteration 2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[ 'l', index: 3, input: 'hello' ] // Iteration 3`</span></span><br></pre></td></tr></table></figure>

<h2 id="使用-matchAll-捕获组示例："><a href="#使用-matchAll-捕获组示例：" class="headerlink" title="使用 .matchAll() 捕获组示例："></a>使用 .matchAll() 捕获组示例：</h2><p>.matchAll  具有上面列出的所有好处。它是一个迭代器，可以用 for…of 循环遍历它,这就是整个语法的不同。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`const string = 'black*raven lime*parrot white*seagull';</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">const regex = /(?&lt;color&gt;.*?)\*(?&lt;bird&gt;[a-z0-9]+)/;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">for (const match of string.matchAll(regex)) &#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let value = match[0];</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let index = match.index;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let input = match.input;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  console.log(`</span>$&#123;value&#125; at $&#123;index&#125; <span class="keyword">with</span> <span class="string">'$&#123;input&#125;'</span><span class="string">`);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  console.log(match.groups.color);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  console.log(match.groups.bird);</span></span><br><span class="line"><span class="string">&#125;`</span></span><br></pre></td></tr></table></figure>
<p>请注意已经没有 /g 标志，因为 .matchAll() 已经包含了它，打印如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`black*raven at 0 with 'black*raven lime*parrot white*seagull'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">black</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">raven</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">lime*parrot at 11 with 'black*raven lime*parrot white*seagull'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">lime</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">parrot</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">white*seagull at 23 with 'black*raven lime*parrot white*seagull'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">white</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">seagull`</span></span><br></pre></td></tr></table></figure>

<p>也许在美学上它与原始正则表达式非常相似，执行while循环实现。但是如前所述，由于上面提到的许多原因，这是更好的方法，移除 /g 不会导致无限循环。</p>
<p>动态导入</p>
<p>现在可以将导入分配给变量：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">element.addEventListener(<span class="string">'click'</span>, <span class="keyword">async</span>() =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="built_in">module</span> = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">`./api-scripts/button-click.js`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">module</span>.clickEvent();</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Array-flat"><a href="#Array-flat" class="headerlink" title="Array.flat()"></a>Array.flat()</h2><p>扁平化多维数组：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`let multi = [1,2,3,[4,5,6,[7,8,9,[10,11,12]]]];</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">multi.flat();               // [1,2,3,4,5,6,Array(4)]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">multi.flat().flat();        // [1,2,3,4,5,6,7,8,9,Array(3)]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">multi.flat().flat().flat(); // [1,2,3,4,5,6,7,8,9,10,11,12]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">multi.flat(Infinity);       // [1,2,3,4,5,6,7,8,9,10,11,12]`</span></span><br></pre></td></tr></table></figure>

<h2 id="Array-flatMap"><a href="#Array-flatMap" class="headerlink" title="Array.flatMap()"></a>Array.flatMap()</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`let array = [1, 2, 3, 4, 5];</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">array.map(x =&gt; [x, x * 2]);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let array = [1, 2, 3, 4, 5];</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">array.map(x =&gt; [x, x * 2]);`</span></span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`[Array(2),Array(2),Array(2),Array(2),Array(2)]</span></span><br><span class="line"><span class="string">0: (2) [1, 2]</span></span><br><span class="line"><span class="string">1: (2) [2, 4]</span></span><br><span class="line"><span class="string">2: (2) [3, 6]</span></span><br><span class="line"><span class="string">3: (2) [4, 8]</span></span><br><span class="line"><span class="string">4: (2) [5, 10]`</span></span><br></pre></td></tr></table></figure>

<h2 id="使用-flatMap-方法："><a href="#使用-flatMap-方法：" class="headerlink" title="使用 flatMap 方法："></a>使用 flatMap 方法：</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`array.flatMap(v =&gt; [v, v * 2]);</span></span><br><span class="line"><span class="string">[1, 2, 2, 4, 3, 6, 4, 8, 5, 10]`</span></span><br></pre></td></tr></table></figure>

<h2 id="Object-fromEntries"><a href="#Object-fromEntries" class="headerlink" title="Object.fromEntries()"></a>Object.fromEntries()</h2><p>将键值对列表转换为对象:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`let obj = &#123; apple : 10, orange : 20, banana : 30 &#125;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let entries = Object.entries(obj);</span></span><br></pre></td></tr></table></figure>
<h2 id="entries"><a href="#entries" class="headerlink" title="entries;"></a>entries;</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">3</span>) [<span class="built_in">Array</span>(<span class="number">2</span>), <span class="built_in">Array</span>(<span class="number">2</span>), <span class="built_in">Array</span>(<span class="number">2</span>)]</span><br><span class="line"></span><br><span class="line"><span class="number">0</span>: (<span class="number">2</span>) [<span class="string">"apple"</span>, <span class="number">10</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>: (<span class="number">2</span>) [<span class="string">"orange"</span>, <span class="number">20</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>: (<span class="number">2</span>) [<span class="string">"banana"</span>, <span class="number">30</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fromEntries = <span class="built_in">Object</span>.fromEntries(entries);</span><br><span class="line"></span><br><span class="line">&#123; <span class="attr">apple</span>: <span class="number">10</span>, <span class="attr">orange</span>: <span class="number">20</span>, <span class="attr">banana</span>: <span class="number">30</span> &#125;<span class="string">`</span></span><br></pre></td></tr></table></figure>

<h2 id="String-trimStart-与-String-trimEnd"><a href="#String-trimStart-与-String-trimEnd" class="headerlink" title="String.trimStart() 与 String.trimEnd()"></a>String.trimStart() 与 String.trimEnd()</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`let greeting = "     Space around     ";</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">greeting.trimEnd();   // "     Space around";</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">greeting.trimStart(); // "Space around     ";`</span></span><br></pre></td></tr></table></figure>

<h2 id="格式良好的-JSON-stringify"><a href="#格式良好的-JSON-stringify" class="headerlink" title="格式良好的 JSON.stringify()"></a>格式良好的 JSON.stringify()</h2><p>此更新修复了字符 U+D800 到 U+DFFF 的处理，有时可以进入 JSON 字符串。 这可能是一个问题，因为 JSON.stringify 可能会将这些数字格式化为没有等效 UTF-8 字符的值, 但 JSON 格式需要 UTF-8 编码。</p>
<p>解析方法使用格式良好的JSON字符串，如:</p>
<p><code>&#39;{ “prop1” : 1, &quot;prop2&quot; : 2 }&#39;; // A well-formed JSON format string</code></p>
<p>注意，要创建正确 JSON 格式的字符串，绝对需要在属性名周围加上双引号。缺少或任何其他类型的引号都不会生成格式良好的JSON。</p>
<p><code>&#39;{ “prop1” : 1, &quot;meth&quot; : () =&gt; {}}&#39;; // Not JSON format string</code><br>JSON 字符串格式与 Object Literal 不同，后者看起来几乎一样，但可以使用任何类型的引号括住属性名，也可以包含方法(JSON格式不允许使用方法):</p>
<p><code>let object_literal={ property: 1, meth:()=&gt; {}};</code></p>
<p>不管怎样，一切似乎都很好。第一个示例看起来是兼容的。但它们也是简单的例子，大多数情况下都能顺利地工作!</p>
<h2 id="U-2028-和-U-2029-字符"><a href="#U-2028-和-U-2029-字符" class="headerlink" title="U+2028 和 U+2029 字符"></a>U+2028 和 U+2029 字符</h2><p>问题是， ES10 之前的 EcmaScript 实际上并不完全支持 JSON 格式。前 ES10 时代不接受未转义行分隔符 U+2028 和 段落分隔符 U+2029 字符:</p>
<h2 id="U-2029-is-the-line-separator"><a href="#U-2029-is-the-line-separator" class="headerlink" title="U+2029 is the line separator"></a>U+2029 is the line separator</h2><p>U+2029 is the paragraph separator. Sometimes it can lurk into your JSON formatted string</p>
<h2 id="对于-U-D800-U-DFFF-之间的所有字符也是如此"><a href="#对于-U-D800-U-DFFF-之间的所有字符也是如此" class="headerlink" title="对于 U+D800 - U+DFFF 之间的所有字符也是如此"></a>对于 U+D800 - U+DFFF 之间的所有字符也是如此</h2><p>如果这些字符潜入 JSON 格式的字符串(假设来自数据库记录)，你可能会花费数小时试图弄清楚为什么程序的其余部分会产生解析错误。</p>
<p>因此，如果你传递 eval 这样的字符串 “console.log(‘ hello ‘)”，它将执行 JavaScript语句 (通过尝试将字符串转换为实际代码),也类似于 JSON.parse 将处理你的 JSON 字符串的方式。</p>
<h2 id="稳定的-Array-prototype-sort"><a href="#稳定的-Array-prototype-sort" class="headerlink" title="稳定的 Array.prototype.sort()"></a>稳定的 Array.prototype.sort()</h2><p>V8 之前的实现对包含10个以上项的数组使用了一种 不稳定 的快速排序算法。</p>
<p>一个稳定的排序算法是当两个键值相等的对象在排序后的输出中出现的顺序与在未排序的输入中出现的顺序相同时。</p>
<p>但情况不再是这样了，ES10 提供了一个稳定的数组排序:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`var fruit = [</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &#123; name: "Apple",      count: 13, &#125;,</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &#123; name: "Pear",       count: 12, &#125;,</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &#123; name: "Banana",     count: 12, &#125;,</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &#123; name: "Strawberry", count: 11, &#125;,</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &#123; name: "Cherry",     count: 11, &#125;,</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &#123; name: "Blackberry", count: 10, &#125;,</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &#123; name: "Pineapple",  count: 10, &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">];`</span></span><br></pre></td></tr></table></figure>
<p>##// 创建排序函数:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`let my_sort = (a, b) =&gt; a.count - b.count;`</span></span><br><span class="line"><span class="comment">// 执行稳定的ES10排序:</span></span><br><span class="line"><span class="string">`let sorted = fruit.sort(my_sort);`</span></span><br><span class="line"><span class="string">`console.log(sorted);`</span></span><br></pre></td></tr></table></figure>

<p>控制台输出(项目以相反的顺序出现):</p>
<h2 id="新的F-unction-toString"><a href="#新的F-unction-toString" class="headerlink" title="新的F unction.toString()"></a>新的F unction.toString()</h2><p>函数是对象，并且每个对象都有一个 .toString() 方法，因为它最初存在于Object.prototype.toString() 上。 所有对象（包括函数）都是通过基于原型的类继承从它继承的。</p>
<p>这意味着我们以前已经有 funcion.toString() 方法了。</p>
<p>但是 ES10 进一步尝试标准化所有对象和内置函数的字符串表示。 以下是各种新案例：</p>
<h2 id="典型的例子"><a href="#典型的例子" class="headerlink" title="典型的例子:"></a>典型的例子:</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`function()&#123;console.log('Hello there.')&#125;.toString();</span></span><br><span class="line"><span class="string">控制台输出(函数体的字符串格式:)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    ⇨ function () &#123; console.log('Hello there.'); &#125;`</span></span><br></pre></td></tr></table></figure>


<p>下面是剩下的例子:</p>
<h3 id="直接在方法名-toString"><a href="#直接在方法名-toString" class="headerlink" title="直接在方法名 .toString()"></a>直接在方法名 .toString()</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`Number.parseInt.toString();</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">⇨ function parseInt() &#123; [native code] &#125;`</span></span><br></pre></td></tr></table></figure>
<p>绑定上下文:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`function () &#123; &#125;.bind(0).toString();</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">⇨ function () &#123; [native code] &#125;`</span></span><br></pre></td></tr></table></figure>

<h3 id="内置可调用函数对象"><a href="#内置可调用函数对象" class="headerlink" title="内置可调用函数对象:"></a>内置可调用函数对象:</h3><p>`Symbol.toString();</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">⇨ <span class="function"><span class="keyword">function</span> <span class="title">Symbol</span>(<span class="params"></span>) </span>&#123; [native code] &#125;<span class="string">`</span></span><br></pre></td></tr></table></figure>

<p>动态生成的函数:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`function* () &#123; &#125;.toString();</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">⇨ function* () &#123; &#125;`</span></span><br></pre></td></tr></table></figure>

<h2 id="prototype-toString"><a href="#prototype-toString" class="headerlink" title="prototype.toString"></a>prototype.toString</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`Function.prototype.toString.call(&#123;&#125;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">⇨ Function.prototype.toString requires that 'this' be a Function"`</span></span><br></pre></td></tr></table></figure>

<h2 id="可选的-Catch-Binding"><a href="#可选的-Catch-Binding" class="headerlink" title="可选的 Catch Binding"></a>可选的 Catch Binding</h2><p>在过去，try/catch 语句中的 catch 语句需要一个变量。 try/catch 语句帮助捕获终端级别的错误:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`try &#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  // Call a non-existing function undefined_Function</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  undefined_Function("I'm trying");</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">catch(error) &#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  // Display the error if statements inside try above fail</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  console.log( error ); // undefined_Function is undefined</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;`</span></span><br></pre></td></tr></table></figure>

<p>在某些情况下，所需的错误变量是未使用的:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`try &#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  JSON.parse(text); // &lt;--- this will fail with "text not defined"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  return true; &lt;--- exit without error even if there is one</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">catch (redundant_sometmes) &lt;--- this makes error variable redundant</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  return false;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;`</span></span><br></pre></td></tr></table></figure>
<p>编写此代码的人通过尝试强制 true 退出 try 子句。但是，这并不是实际发生的情况</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="string">`(() =&gt; &#123;</span></span><br><span class="line"><span class="string">    try &#123;</span></span><br><span class="line"><span class="string">        JSON.parse(text)</span></span><br><span class="line"><span class="string">        return true</span></span><br><span class="line"><span class="string">    &#125; catch(err) &#123;</span></span><br><span class="line"><span class="string">        return false</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;)()</span></span><br><span class="line"><span class="string">=&gt; false`</span></span><br></pre></td></tr></table></figure>

<p>在 ES10 中，捕获错误的变量是可选的</p>
<p>现在可以跳过错误变量:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`try &#123;</span></span><br><span class="line"><span class="string">    JSON.parse(text);</span></span><br><span class="line"><span class="string">    return true;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">catch</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    return false;</span></span><br><span class="line"><span class="string">&#125;`</span></span><br></pre></td></tr></table></figure>

<p>目前还无法测试上一个示例中的 try 语句的结果，但一旦它出来，我将更新这部分。</p>
<h2 id="标准化-globalThis-对象"><a href="#标准化-globalThis-对象" class="headerlink" title="标准化 globalThis 对象"></a>标准化 globalThis 对象</h2><p>这在ES10之前， globalThis 还没有标准化。</p>
<p>在产品代码中，你可以自己编写这个怪物，在多个平台上“标准化”它:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`var getGlobal = function () &#123;</span></span><br><span class="line"><span class="string">  if (typeof self !== 'undefined') &#123; return self; &#125;</span></span><br><span class="line"><span class="string">  if (typeof window !== 'undefined') &#123; return window; &#125;</span></span><br><span class="line"><span class="string">  if (typeof global !== 'undefined') &#123; return global; &#125;</span></span><br><span class="line"><span class="string">  throw new Error('unable to locate global object');</span></span><br><span class="line"><span class="string">&#125;;`</span></span><br></pre></td></tr></table></figure>

<p>但即使这样也不总是奏效。因此，ES10 添加了 globalThis 对象，从现在开始，该对象用于在任何平台上访问全局作用域:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 访问全局数组构造函数</span></span><br><span class="line"><span class="string">`globalThis.Array(0, 1, 2);</span></span><br><span class="line"><span class="string">⇨ [0, 1, 2]`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类似于 ES5 之前的 window.v = &#123; flag: true &#125;</span></span><br><span class="line"><span class="string">`globalThis.v = &#123; flag: true &#125;;`</span></span><br><span class="line"></span><br><span class="line"><span class="string">`console.log(globalThis.v);</span></span><br><span class="line"><span class="string">⇨ &#123; flag: true &#125;`</span></span><br></pre></td></tr></table></figure>



<h2 id="Symbol-description"><a href="#Symbol-description" class="headerlink" title="Symbol.description"></a>Symbol.description</h2><p>description 是一个只读属性，它返回 Symbol 对象的可选描述。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`let mySymbol = 'My Symbol';</span></span><br><span class="line"><span class="string">let symObj = Symbol(mySymbol);</span></span><br><span class="line"><span class="string">symObj; // Symbol(My Symbol)</span></span><br><span class="line"><span class="string">symObj.description; // "My Symbol"`</span></span><br></pre></td></tr></table></figure>



<h2 id="Hashbang-语法"><a href="#Hashbang-语法" class="headerlink" title="Hashbang  语法"></a>Hashbang  语法</h2><p>也就是 unix 用户熟悉的 shebang。它指定一个解释器(什么将执行JavaScript文件?)。</p>
<p>ES10标准化，我不会对此进行详细介绍，因为从技术上讲，这并不是一个真正的语言特性，但它基本上统一了 JavaScript 在服务器端的执行方式。</p>
<p><code>$ ./index.js</code></p>
<p>代替</p>
<p><code>$ node index.js</code></p>
<p>##ES10类:private、static 和 公共成员</p>
<p>新的语法字符 #octothorpe（hash tag）现在用于直接在类主体的范围内定义变量，函数，getter 和 setter ……以及构造函数和类方法。</p>
<p>下面是一个毫无意义的例子，它只关注新语法:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`class Raven extends Bird &#123;</span></span><br><span class="line"><span class="string">#state = &#123; eggs: 10&#125;;</span></span><br><span class="line"><span class="string">***</span></span><br><span class="line"><span class="string">// getter</span></span><br><span class="line"><span class="string">    get #eggs() &#123; </span></span><br><span class="line"><span class="string">        return state.eggs;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">// setter</span></span><br><span class="line"><span class="string">    set #eggs(value) &#123;</span></span><br><span class="line"><span class="string">        this.#state.eggs = value;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    ***</span></span><br><span class="line"><span class="string">#lay() &#123;</span></span><br><span class="line"><span class="string">        this.#eggs++;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">constructor() &#123;</span></span><br><span class="line"><span class="string">        super();</span></span><br><span class="line"><span class="string">        this.#lay.bind(this);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    ***</span></span><br><span class="line"><span class="string">#render() &#123;</span></span><br><span class="line"><span class="string">        /* paint UI */</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;`</span></span><br></pre></td></tr></table></figure>
<hr>
<p>原文：(<a href="https://medium.freecodecamp.org/the-complete-guide-to-es10-features-5fd0feb9513a" target="_blank" rel="noopener">https://medium.freecodecamp.org/the-complete-guide-to-es10-features-5fd0feb9513a</a>)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/17/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/c26d8749520ecf2b.png">
      <meta itemprop="name" content="yinwei">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yinwei的个人博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/17/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-17 15:58:16" itemprop="dateCreated datePublished" datetime="2020-02-17T15:58:16+08:00">2020-02-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="yinwei"
      src="/images/c26d8749520ecf2b.png">
  <p class="site-author-name" itemprop="name">yinwei</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">6</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yinwei</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.7.1
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
